<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../docs-assets/ico/favicon.png">

    <title>Animation Assignment</title>
    <title>Animation</title>
    <script src="../lib/three.js" type="text/javascript"></script>
    <script src="../lib/jquery.js" type="text/javascript"></script>
    <script src="../lib/orbitcontrols.js" type="text/javascript"></script>
    <!--<script src="../lib/bootstrap.js" type="text/javascript"></script>-->

    <!-- Bootstrap core CSS -->
    <link href="../css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../css/starter.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>

<body>

<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../index.html">Animation Assignment</a>
        </div>
        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li class="active"><a href="basicBoneAnimation.html">Bone animation</a></li>
                <li><a href="monkeyrunwavemerge.html">Animation merge</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</div>

<div class="container">

    <div class="starter-template">
        <h1>Bone animation</h1>
        <p class="lead">Controlling an individual finger using keyboard input - Spacebar</br>
        Use mouse to pan and zoom</br>
        <a href="https://github.com/josdirksen/learning-threejs">Model credit</a></p>
    </div>

    <div id="inner" style="position: relative">
        <div id="datGUI"></div>
        <div id="webgl"></div>
    </div>

    <script type="text/javascript">
        $(document).ready( function ()
        {
            var width = $('#webgl').width();
            var height = $('#webgl').height();

            var animate = false;
            var finger, targpos;

            var scene = new THREE.Scene();

            var camera = new THREE.PerspectiveCamera(45, width / height, 0.1, 1000);

            var webGLRender = new THREE.WebGLRenderer();
            webGLRender.setClearColor(0xEEEEEE, 1.0);
            webGLRender.setSize(width, height);
            webGLRender.shadowMapEnabled = true;


            camera.position.x = 5;
            camera.position.y = 5;
            camera.position.z = -5;
            camera.lookAt(scene.position);
            var control = new THREE.OrbitControls(camera);


            var spotLight = new THREE.SpotLight(0xffffff);
            spotLight.position.set(0, 50, 30);
            spotLight.intensity = 2;
            scene.add(spotLight);

            $("#webgl").append(webGLRender.domElement);

            var mesh;
            var clock = new THREE.Clock();
            document.addEventListener("keydown", onDocumentKeyDown, false);
            document.addEventListener("keyup", onDocumentKeyUp, false);

            var loader = new THREE.JSONLoader();
            loader.load('../resources/hand.js', function(geometry, mat) {
                var mat = new THREE.MeshLambertMaterial({color:0xF0C8C9, skinning: true});
                mesh = new THREE.SkinnedMesh(geometry, mat);


                targpos = mesh.bones[6].rotation;
                scene.add(mesh);



            }, '../resources');




            function update(delta)
            {

                var index1 = 6
                //var index1Q = mesh.bones[index1].Quaternion;

                if (animate & mesh.bones[index1].rotation.z > -0.9)
                {

                    mesh.bones[index1].rotation.z -= 0.1
                    mesh.bones[index1-1].rotation.z -= 0.1
                    mesh.bones[index1-2].rotation.z -=0.1

                }
                else if (!animate && mesh.bones[index1].rotation.z < 0)
                {
                    mesh.bones[index1].rotation.z += 0.1
                    mesh.bones[index1-1].rotation.z += 0.1
                    mesh.bones[index1-2].rotation.z += 0.1
                }

            };



            function onDocumentKeyDown(event)
            {
                var keycode = event.which;

                if (keycode == 32)
                {
                    animate = true;
                    finger = 1;
                }

            }

            function onDocumentKeyUp(event)
            {
                animate = false;
            }

            render();

            function render()
            {
                var delta = clock.getDelta();
                control.update();

                if (mesh)
                {
                    //console.log("Yes")
                    update(delta);
                }

                requestAnimationFrame(render);
                webGLRender.render(scene, camera);

            }


        });

    </script>

</div><!-- /.container -->


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->

<script src="../lib/bootstrap.min.js"></script>
</body>
</html>


